# Оптимизация развертывания on-site среды Creatio

### Приветствую тебя! Ты, как и я, много времени тратишь на развертывание среды в IIS? Тогда это для тебя :relaxed: Я работаю над скриптом, который позволит сократить времяпрепровождение за подобным занятием. 
____
## Что делает скрипт?
Выделено то, что уже реализовано. Остальное уже в разработке :wink:
+ `Копирует среды.`
+ `Добавляет сайты в IIS.`
+ Восстанавливает базу данных
    + `Восстановление из .bak файла базы данных в MSSQL.`
    + Восстановление из .backup файла базы данных в PostgreSQL.
+ Меняет содержимое файлов в файловой системе
    + `Меняет файл Web.config для среды разработки.`
    + `Меняет файл ConnectionString.config при использовании MSSQL`
    + Меняет файл ConnectionString.config при использовании PostgreSQL.
____
## Первоначальная настройка    
Прежде чем запустить скрипт у себя, необходимо немного подготовиться:    
:arrow_forward: Установить SQL Server Management Studio. Если не установлена, то требуется либо установить SSMS, либо установить через NuGet необходимый пакет по ссылке: https://docs.microsoft.com/ru-ru/sql/relational-databases/server-management-objects-smo/installing-smo?view=sql-server-ver15     
:arrow_forward: В powershell разрешить запуск скриптов. Для этого в Powershell введите:

```powershell
    Set-ExecutionPolicy Unrestricted CurrentUser -Force
```
![image](https://user-images.githubusercontent.com/51877842/163171255-4a106be2-24dd-46af-beb5-60c91aa8948a.png)

:arrow_forward:Сам скрипт следует расположить в одной директории с папкой **чистой** среды.  

![image](https://user-images.githubusercontent.com/51877842/163172178-99ee672a-5ddc-40a5-bce5-35f36cc204b8.png) 
____
## А что дальше?
Дело осталось за малым: быстро настроить конфиг, который находится в файле config.json :star2::
### 1. PathEnvironment - Путь размещения будущей среды. 
Если в вашем пути находится символ *"\\"*, то замените его на символ *"/"*

### 2. TitleEnvironment - название среды.
Такое название должно быть у папки чистой среды. Это название будет использоваться в папке среды, названии сайта IIS и БД

### 3. TitleServers - названия серверов баз данных.
Достаточно указать только необходимый сервер. 
Например, для MS SQL можно получить название сервера при подключении к серверу. 

![image](https://user-images.githubusercontent.com/51877842/163175813-8c0b91ee-5848-4a46-88d1-5f71201efa84.png)

### 4. Environments - непосредственно среды разработки
Это массив сред. Можно создавать любое количество сред, достаточно указать их через запятую по аналогии!

####   4.1.  Postscript - текст приписки среды
Текст, который будет добавлен после названия **TitleEnvironment**

####   4.2. EditFileWebConfig - необходимость изменять файл Web.config

####   4.3. NumberDBRedis - номер базы Redis

####   4.4. IIS - конфигурации сайта IIS.

+ ##### Title - название сайта IIS. Автоматически указывается, если значение = "default"

+ ##### Port - номер порта сайта IIS. Автоматически указывается, если значение = "default"

####   4.5. DB - конфигурации базы данных.

+ ##### Title - название БД. Автоматически указывается, если значение = "default"

+ ##### LoginUser - логин пользователя. Автоматически указывается, если значение = "default"

+ ##### PasswordUser - пароль пользователя. Автоматически указывается, если значение = "default"
